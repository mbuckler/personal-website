(function($){let $navbar=$('.navbar-header');let navbar_offset=$navbar.innerHeight();function scrollToAnchor(target){target=(typeof target==='undefined'||typeof target==='object')?window.location.hash:target;target=target.replace(/:/g,'\\:');if($(target).length){$('body').addClass('scrolling');$('html, body').animate({scrollTop:$(target).offset().top-navbar_offset},600,function(){$('body').removeClass('scrolling');});}}function fixScrollspy(){let $body=$('body');let data=$body.data('bs.scrollspy');if(data){data.options.offset=navbar_offset;$body.data('bs.scrollspy',data);$body.scrollspy('refresh');}}window.addEventListener("hashchange",scrollToAnchor);$('#navbar-main li.nav-item a').on('click',function(event){let hash=this.hash;if(hash&&$(hash).length&&($("#homepage").length>0)){event.preventDefault();$('html, body').animate({scrollTop:$(hash).offset().top-navbar_offset},1500,'easeInOutExpo');}});$('#back_to_top').on('click',function(event){event.preventDefault();$('html, body').animate({'scrollTop':0},800,function(){window.location.hash="";});});$(document).on('click','.navbar-collapse.in',function(e){if($(e.target).is('a')&&$(e.target).attr('class')!='dropdown-toggle'){$(this).collapse('hide');}});let $grid_projects=$('#container-projects');$grid_projects.imagesLoaded(function(){$grid_projects.isotope({itemSelector:'.isotope-item',layoutMode:'masonry'});$('#filters a').click(function(){let selector=$(this).attr('data-filter');$grid_projects.isotope({filter:selector});$(this).removeClass('active').addClass('active').siblings().removeClass('active all');return false;});});let $grid_pubs=$('#container-publications');$grid_pubs.isotope({itemSelector:'.isotope-item',percentPosition:true,masonry:{columnWidth:'.grid-sizer'}});$('.pub-filters-select').on('change',function(){let filterValue=this.value;$grid_pubs.isotope({filter:filterValue});let url=$(this).val();if(url.substr(0,9)=='.pubtype-'){window.location.hash=url.substr(9);}else{window.location.hash='';}});function filter_publications(){let urlHash=window.location.hash.replace('#','');let filterValue='*';if(urlHash!=''&&!isNaN(urlHash)){filterValue='.pubtype-'+urlHash;}$('.pub-filters-select').val(filterValue);$grid_pubs.isotope({filter:filterValue});}$(window).on('load',function(){if(window.location.hash){if(window.location.hash=="#top"){window.location.hash=""}else{scrollToAnchor();}}let $body=$('body');$body.scrollspy({offset:navbar_offset});let resizeTimer;$(window).resize(function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(fixScrollspy,200);});if($('.pub-filters-select')){filter_publications();}});})(jQuery);$(window).scroll(function(){if($(".navbar").offset().top>$('#top').outerHeight(true)+50){$(".navbar").addClass("top-nav-collapse");}else{$(".navbar").removeClass("top-nav-collapse");}});var affix_navbar=function(){$('.navbar').affix({offset:{top:function(){return(this.top=$('header').outerHeight(true))}}});}
$('.nav-wrapper').height($('nav').height());$('nav a').on('click',function(){$(".navbar-ex1-collapse").removeClass("in");$(".navbar-ex1-collapse").attr("aria-expanded","false");});$('#cu-search-toggle').on('click',function(){$('.cu-search-toggle').toggleClass('glyphicon-search glyphicon-remove');});var position_search=function(){var search_toggle_button_height=$('#cu-search-toggle').outerHeight();var cu_csl_logo_height=$('.cu-csl-logo-div').outerHeight();var banner_height=Math.max(search_toggle_button_height,cu_csl_logo_height);var top_position=(banner_height-search_toggle_button_height)/2;$('.cu-search-toggle-div').height(cu_csl_logo_height);$('#cu-search-toggle').css({top:top_position});};$(window).resize(function(){position_search();affix_navbar();});$(window).load(function(){position_search();affix_navbar();});